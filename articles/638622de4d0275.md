---
title: "â€»å…¬é–‹å‰ç¢ºèªå¿…è¦â€»ã€€RDS(MySQL)ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¨ä¸­èº«ã‚’ç¢ºèªã™ã‚‹æ–¹æ³•"
emoji: "ğŸ’¨"
type: "tech"
topics: []
published: false
---

**â€»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã©ã®ç§˜å¯†æƒ…å ±ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€å…¬é–‹å‰ã«ç¢ºèªã™ã‚‹ã“ã¨ï¼ï¼**
## ã¯ã˜ã‚ã«
ã“ã‚“ã«ã¡ã¯ã€‚ã‚ãƒ¼ã‚ã§ã™ã€‚ECS on Fargateã®ç’°å¢ƒã«ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã®ã§ã™ãŒã€RDSã®ä¸­èº«ã‚’è¦‹ãŸã„ã¨ã„ã†ã“ã¨ã§ã€å®Ÿæ–½ã—ãŸæ‰‹é †ã‚’å‚™å¿˜ã¨ã„ã†å½¢ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚RDS(MySQL)ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ä¸­èº«ã‚’ç¢ºèªã—ãŸã„ã¨ã„ã†æ–¹ã¯ãœã²ã”å‚è€ƒãã ã•ã„ã€‚
Fargateã‹ã‚‰RDSã¸æ¥ç¶šã—ä¸­èº«ã‚’è¦‹ã‚‰ã‚Œã‚‹ã¨åˆå­¦è€…ã®ç§ã¯æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€é•ã†ã‚ˆã†ã§ã—ãŸã€‚å®Ÿéš›ã«ã¯ã€RDSã¸æ¥ç¶šã™ã‚‹ãŸã‚ã®EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”¨æ„ã—ã¦ã€ãã®EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

â€»æ³¨æ„â€»
åˆå­¦è€…ã®ç§ãŒå‚™å¿˜ã®ãŸã‚ã«æ›¸ã„ã¦ã„ã¾ã™ã€‚é–“é•ãˆãŸæƒ…å ±ã‚’ç™ºä¿¡ã—ã¦ã„ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹ãŸã‚ã€æ°—ä»˜ã„ãŸæ–¹ã¯ã‚³ãƒ¡ãƒ³ãƒˆãã ã•ã„ã€‚

## å‰ææ¡ä»¶
ãƒ»RDS(MySQL)ãŒä½œæˆæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨

## å…¨ä½“çš„ãªæµã‚Œ
1. RDSã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹
2. EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¸SSHæ¥ç¶š
3. EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰RDSã¸æ¥ç¶š

## EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ
RDS(MySQL)ã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ã€EC2ã‚’ä½œæˆã—ã¾ã™ã€‚
1. ã€Œã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’èµ·å‹•ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
![](https://storage.googleapis.com/zenn-user-upload/1439b1a52c9b-20240616.png)

2. ä»»æ„ã®åå‰ã‚’ä»˜ã‘ã€Amazon ãƒã‚·ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å¤‰æ›´ã™ã‚‹
![](https://storage.googleapis.com/zenn-user-upload/b59297df7629-20240616.png)

3. ã€Œæ–°ã—ã„ã‚­ãƒ¼ãƒšã‚¢ã®ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
![](https://storage.googleapis.com/zenn-user-upload/c497f98080c3-20240616.png)

4. ä»»æ„ã®ã‚­ãƒ¼ãƒšã‚¢åã‚’ä»˜ã‘ã€ã€Œã‚­ãƒ¼ãƒšã‚¢ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
![](https://storage.googleapis.com/zenn-user-upload/cc599200e1fe-20240616.png)

5. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã§ã€ã€Œç·¨é›†ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
![](https://storage.googleapis.com/zenn-user-upload/02eab66350ab-20240616.png)

6. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã‚’ä»¥ä¸‹ã®é€šã‚Šè¨­å®šã™ã‚‹
    ãƒ»VPCï¼š RDSã¨åŒã˜ã‚‚ã®ã‚’é¸æŠ
    ãƒ»ã‚µãƒ–ãƒãƒƒãƒˆï¼š RDSã¨åŒã˜ã‚‚ã®ã‚’é¸æŠ
    ãƒ»ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã®è‡ªå‹•å‰²ã‚Šå½“ã¦ï¼š æœ‰åŠ¹åŒ–
    ãƒ»ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—)ï¼š ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆ(ä»»æ„ã®åå‰ã‚’ä»˜ã‘ã‚‹)
![](https://storage.googleapis.com/zenn-user-upload/9f7afaec9f4c-20240616.png)

7. ä¸Šè¨˜ä»¥å¤–ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®çŠ¶æ…‹ã§ã€ã€Œã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’èµ·å‹•ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
![](https://storage.googleapis.com/zenn-user-upload/81507a94034e-20240616.png)

## EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¸SSHæ¥ç¶š
1. ä¸Šè¨˜ã§ä½œæˆã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’é¸æŠã—ã€ã€Œæ¥ç¶šã€ã‚’ã‚¯ãƒªãƒƒã‚¯
![](https://storage.googleapis.com/zenn-user-upload/3391355e8e5f-20240616.png)

2. SSHã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¿ãƒ–ã‚’é¸æŠã—ã€ä¸€ç•ªä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼
![](https://storage.googleapis.com/zenn-user-upload/c1d2af16211f-20240616.png)

3. å…ˆã»ã©ä½œæˆã—ãŸpemãƒ•ã‚¡ã‚¤ãƒ«ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•(é€šå¸¸pemãƒ•ã‚¡ã‚¤ãƒ«ã¯Downloadsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ä¿å­˜ã•ã‚Œã‚‹)ã—ã€æ‰‹é †2ã§ã‚³ãƒ”ãƒ¼ã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
```
cd Downloads
```
```
ssh -i "shiftpilot-ec2-rds-key.pem" ec2-user@ec2-184-72-193-70.compute-1.amazonaws.com
```
4. Are you sure you want to continue connecting (yes/no/[fingerprint])? ã¨èã‹ã‚Œã‚‹ãŒã€yesã¨ç­”ãˆã‚‹
5. ãƒ­ã‚°ã‚¤ãƒ³ãŒå®Œäº†ã™ã‚‹ã¨ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹
```
   ,     #_
   ~\_  ####_        Amazon Linux 2
  ~~  \_#####\
  ~~     \###|       AL2 End of Life is 2025-06-30.
  ~~       \#/ ___
   ~~       V~' '->
    ~~~         /    A newer version of Amazon Linux is available!
      ~~._.   _/
         _/ _/       Amazon Linux 2023, GA and supported until 2028-03-15.
       _/m/'           https://aws.amazon.com/linux/amazon-linux-2023/

[ec2-user@ip-10-0-148-121 ~]$
```
## EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰RDS(MySQL)ã¸æ¥ç¶š
1. ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã€MySQLã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
sudo yum install mysql -y
```
2. ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›å¾Œã€RDS(MySQL)ã¸æ¥ç¶š
```
mysql <ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å> -h <ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ> -P 3306 -u <ãƒã‚¹ã‚¿ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼å> -p
```
ãªãŠã€ä»¥ä¸‹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç¢ºèªã§ãã‚‹
![](https://storage.googleapis.com/zenn-user-upload/9ef207d824a7-20240616.png)

â€»ä¸Šè¨˜ã‚’å®Ÿè¡Œã—ã€æ¥ç¶šã§ããªã„å ´åˆã®ã‚¨ãƒ©ãƒ¼è§£æ±ºæ–¹æ³•ã¯[ã“ã¡ã‚‰](https://qiita.com/tkym_0122/items/3aae9c3391b0f89b5939)
    ```
    ERROR 2003 (HY000): Can't connect to MySQL server on 'shiftpilot-db.cd6ycm22gt4o.us-east-1.rds.amazonaws.com' (110)
    ```
3. ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°å®Œäº†
```
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MySQL connection id is 8884
Server version: 8.0.35 Source distribution

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MySQL [shiftpilot-db]>
```
## RDS(MySQL)ã®ä¸­èº«ã®ç¢ºèª
ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸­èº«ã‚’ç¢ºèªã§ãã‚‹ã€‚
```
MySQL [shiftpilot-db]> select * FROM <ãƒ†ãƒ¼ãƒ–ãƒ«å>
```

## ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã«ã¤ã„ã¦

### å‚è€ƒæ–‡çŒ®
https://dev.classmethod.jp/articles/sales-create-ec2/
https://dev.classmethod.jp/articles/sales-rds-ec2-session/
https://note.com/standenglish/n/n8fce48f8dbfa
https://qiita.com/mittsukan/items/fa85db0ca125b8ed9ebe
